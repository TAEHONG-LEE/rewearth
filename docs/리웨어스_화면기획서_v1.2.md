# 📱 리웨어스 앱 화면 기획서

---

## 1. 개요

| 항목 | 내용 |
|------|------|
| **프로젝트명** | 리웨어스 (ReWears) |
| **플랫폼** | Flutter (iOS/Android) |
| **서비스 유형** | 의류 대여 서비스 앱 |
| **타겟 사용자** | 특별한 날 의류를 대여하고 싶은 고객 + 관리자 |
| **인증 방식** | 전화번호 인증 (Firebase Authentication) |

---

## 2. 로그인 정책

### 2.1 기본 원칙
- **비로그인 상태에서도 앱의 핵심 기능(탐색) 사용 가능**
- **로그인이 필수인 시점에서만 로그인 유도 팝업 표시**
- **팝업은 바텀시트 형태로 부드럽게 노출**

### 2.2 인증 방식
- **Firebase Authentication - Phone Auth 사용**
- SMS 인증번호 발송 → 6자리 코드 입력 → 인증 완료
- 신규 사용자: 인증 후 프로필 설정 화면으로 이동
- 기존 사용자: 인증 후 이전 화면으로 복귀

### 2.3 비로그인 사용 가능 기능
| 기능 | 가능 여부 |
|------|----------|
| 홈 화면 탐색 | ✅ 가능 |
| 카테고리 탐색 | ✅ 가능 |
| 상품 목록 보기 | ✅ 가능 |
| 상품 상세 보기 | ✅ 가능 |
| 코디 세트 보기 | ✅ 가능 |
| 검색 | ✅ 가능 |
| 픽업 장소 확인 | ✅ 가능 |

### 2.4 로그인 필수 기능 (팝업 트리거 지점)
| 화면/액션 | 트리거 시점 | 팝업 메시지 |
|----------|------------|-------------|
| **예약하기 버튼 탭** | 상품 상세에서 "예약하기" 버튼 클릭 시 | "예약을 진행하려면 로그인이 필요해요" |
| **내 예약 탭 진입** | 하단 탭바에서 "내 예약" 탭 클릭 시 | "예약 내역을 확인하려면 로그인해주세요" |
| **마이페이지 탭 진입** | 하단 탭바에서 "마이페이지" 탭 클릭 시 | "내 정보를 확인하려면 로그인해주세요" |
| **찜하기 버튼 탭** (Phase 2) | 상품 찜 버튼 클릭 시 | "찜 목록에 추가하려면 로그인이 필요해요" |

### 2.5 로그인 유도 팝업 UI
```
┌─────────────────────────────────┐
│                                 │
│              🎩                 │
│                                 │
│      예약을 진행하려면           │
│      로그인이 필요해요           │
│                                 │
│   ┌─────────────────────────┐   │
│   │   전화번호로 시작하기    │   │  ← Primary (버건디)
│   └─────────────────────────┘   │
│                                 │
│         나중에 할게요           │  ← Text Button (Gray)
│                                 │
└─────────────────────────────────┘
```

---

## 3. 화면 구조 (Information Architecture)

```
리웨어스 앱
├── 🚀 스플래시
│
├── 🏠 메인 탭 (BottomNavigation) ← 비로그인도 접근 가능
│   ├── 홈
│   ├── 카테고리
│   ├── 내 예약 ← 🔐 로그인 필요
│   └── 마이페이지 ← 🔐 로그인 필요
│
├── 📦 상품 플로우 (비로그인 접근 가능)
│   ├── 상품 목록
│   ├── 상품 상세
│   │   └── 예약하기 버튼 ← 🔐 로그인 필요
│   └── 코디 세트 상세
│       └── 예약하기 버튼 ← 🔐 로그인 필요
│
├── 🔐 인증 플로우 (팝업에서 진입)
│   ├── 전화번호 입력
│   ├── 인증번호 입력
│   └── 프로필 설정 (신규 사용자)
│
├── 📅 예약 플로우 (로그인 필수)
│   ├── 날짜 선택 (캘린더)
│   ├── 픽업 장소 선택
│   ├── 예약 확인
│   └── 결제 안내 (계좌이체)
│
└── ⚙️ 관리자 (별도 앱 또는 웹)
    ├── 대시보드
    ├── 상품 관리
    ├── 예약 관리
    └── 픽업 위치 관리
```

---

## 4. 상세 화면 기획

---

### 4.1 스플래시 화면

| 항목 | 내용 |
|------|------|
| 화면명 | Splash |
| 목적 | 앱 로딩, 브랜드 인지 |
| 구성요소 | 로고 (🎩 또는 브랜드 로고), 앱 이름 "리웨어스", 로딩 인디케이터 |
| 배경 | 블랙 (#000000) |
| 텍스트 | 화이트 (#FFFFFF) |
| 동작 | 2초 후 **홈 화면으로 바로 이동** (로그인 여부 무관) |

---

### 4.2 메인 탭 화면

#### 4.2.1 홈 화면
| 항목 | 내용 |
|------|------|
| 화면명 | Home |
| 로그인 필요 | ❌ 불필요 |
| 목적 | 메인 진입점, 상품 탐색 |
| 구성요소 | 상단 로고 + 검색 아이콘, 배너 슬라이더, 카테고리 아이콘 (상의/하의/아우터/세트), 베스트 아이템 섹션 (가로 스크롤), 코디 세트 섹션 (가로 스크롤), 전체 보기 버튼 |
| 네비게이션 | 하단 탭바 (홈/카테고리/내예약/마이페이지) |

#### 4.2.2 카테고리 화면
| 항목 | 내용 |
|------|------|
| 화면명 | Category |
| 로그인 필요 | ❌ 불필요 |
| 목적 | 카테고리별 상품 탐색 |
| 구성요소 | 상단 탭 (전체/상의/하의/아우터/세트), 정렬 드롭다운 (인기/최신/낮은가격/높은가격), 필터 버튼 (사이즈), 상품 그리드 (2열) |

#### 4.2.3 내 예약 화면
| 항목 | 내용 |
|------|------|
| 화면명 | MyReservations |
| 로그인 필요 | ✅ **필요** → 비로그인 시 로그인 유도 팝업 |
| 목적 | 예약 내역 확인 |
| 구성요소 | 상단 탭 (전체/예약대기/대여중/완료), 예약 카드 리스트 |
| 예약 카드 | 상품 썸네일, 상품명, 대여 기간, 상태 뱃지, 픽업 장소 |
| 빈 상태 | "아직 예약 내역이 없어요" + 상품 둘러보기 버튼 |

#### 4.2.4 마이페이지 화면
| 항목 | 내용 |
|------|------|
| 화면명 | MyPage |
| 로그인 필요 | ✅ **필요** → 비로그인 시 로그인 유도 팝업 |
| 목적 | 개인 정보 및 설정 |
| 구성요소 | 프로필 영역 (이름, 전화번호 뒷자리, 사이즈 정보), 메뉴 리스트 |
| 메뉴 항목 | 프로필 수정, 예약 내역, 공지사항, 고객센터(카카오톡), 이용약관, 로그아웃 |

---

### 4.3 상품 플로우

#### 4.3.1 상품 목록 화면
| 항목 | 내용 |
|------|------|
| 화면명 | ProductList |
| 로그인 필요 | ❌ 불필요 |
| 목적 | 상품 리스트 표시 |
| 구성요소 | 앱바 (뒤로가기, 카테고리명), 정렬/필터, 상품 그리드 (2열) |
| 상품 카드 | 이미지, 상품명, 1일 대여가격, 대여 가능 여부 뱃지 |

#### 4.3.2 상품 상세 화면
| 항목 | 내용 |
|------|------|
| 화면명 | ProductDetail |
| 로그인 필요 | ❌ 탐색은 불필요 / ✅ **예약하기 버튼 탭 시 필요** |
| 목적 | 상품 정보 확인 및 예약 진입 |
| 구성요소 | 이미지 슬라이더 + 인디케이터, 상품명, 가격 정보 (1일/3일/5일), 사이즈 정보, 재고 상태 (예약가능/대여중/반납예정 + 날짜), 상품 설명, 픽업 장소 미리보기 (지도 썸네일), 연관 코디 세트 섹션 |
| 하단 고정 | **예약하기 버튼** (버건디 배경) |
| 예약하기 탭 시 | 비로그인 → 로그인 유도 팝업 / 로그인 → 날짜 선택 화면 이동 |

#### 4.3.3 코디 세트 상세 화면
| 항목 | 내용 |
|------|------|
| 화면명 | CoordinateSetDetail |
| 로그인 필요 | ❌ 탐색은 불필요 / ✅ **예약하기 버튼 탭 시 필요** |
| 목적 | 세트 상품 확인 |
| 구성요소 | 세트 대표 이미지, 세트명, 세트 가격 (개별 대비 할인율 표시), 포함 상품 리스트 (각 상품 탭 시 상세 이동 가능) |
| 하단 고정 | **세트 예약하기 버튼** |

---

### 4.4 인증 플로우 (Firebase Phone Auth)

#### 4.4.1 전화번호 입력 화면
| 항목 | 내용 |
|------|------|
| 화면명 | PhoneInput |
| 목적 | 전화번호 수집 및 인증번호 발송 |
| 구성요소 | 로고, 안내 문구 "전화번호로 간편하게 시작하세요", 전화번호 입력 필드 (010-0000-0000 형식), 인증번호 받기 버튼, 닫기(X) 버튼 |
| 유효성 검사 | 전화번호 형식 검증 (11자리) |
| 동작 | 인증번호 받기 탭 → Firebase에서 SMS 발송 → 인증번호 입력 화면 이동 |
| Firebase | `verifyPhoneNumber()` 호출 |

#### 4.4.2 인증번호 입력 화면
| 항목 | 내용 |
|------|------|
| 화면명 | OTPInput |
| 목적 | SMS 인증번호 확인 |
| 구성요소 | 안내 문구 "인증번호 6자리를 입력해주세요", 전화번호 표시 (010-****-1234), 인증번호 입력 필드 (6자리, 자동 포커스), 타이머 (3:00), 인증번호 재발송 버튼, 확인 버튼 |
| 자동 입력 | SMS 자동 읽기 지원 (Android) |
| 동작 | 인증 성공 + 신규 사용자 → 프로필 설정 / 인증 성공 + 기존 사용자 → 이전 화면 복귀 |
| Firebase | `signInWithCredential()` 호출 |

#### 4.4.3 프로필 설정 화면
| 항목 | 내용 |
|------|------|
| 화면명 | ProfileSetup |
| 목적 | 신규 사용자 기본 정보 수집 |
| 구성요소 | 안내 문구 "마지막으로 정보를 입력해주세요", 이름 입력, 사이즈 선택 (칩 형태: S/M/L/XL/XXL), 완료 버튼 |
| 동작 | 완료 → Firestore에 사용자 정보 저장 → 이전 화면 복귀 + 해당 액션 재실행 |
| Firebase | Firestore `users` 컬렉션에 문서 생성 |

---

### 4.5 예약 플로우 (로그인 필수)

#### 4.5.1 날짜 선택 화면
| 항목 | 내용 |
|------|------|
| 화면명 | DateSelection |
| 목적 | 대여 날짜 선택 |
| 구성요소 | 상품 미니 정보 (썸네일, 이름, 가격), 캘린더 (예약 불가 날짜 회색 처리), 대여 기간 선택 (1일/3일/5일 칩), 선택 요약 (시작일 ~ 종료일), 다음 버튼 |
| 연동 | Google Calendar API (Phase 2) |

#### 4.5.2 픽업 장소 선택 화면
| 항목 | 내용 |
|------|------|
| 화면명 | PickupLocation |
| 목적 | 픽업/반납 장소 및 시간 선택 |
| 구성요소 | 지도 (Google Maps), 픽업 장소 마커들, 장소 리스트 (카드 - 장소명, 주소, 운영시간), 픽업 시간 선택 (드롭다운), 반납 시간 선택 (드롭다운), 다음 버튼 |

#### 4.5.3 예약 확인 화면
| 항목 | 내용 |
|------|------|
| 화면명 | ReservationConfirm |
| 목적 | 예약 정보 최종 확인 |
| 구성요소 | 상품 정보 카드, 대여 기간 정보, 픽업 정보 (장소, 시간), 반납 정보 (장소, 시간), 가격 상세 (기본가 + 기간), 총 결제 금액, 예약 요청 버튼 |

#### 4.5.4 결제 안내 화면
| 항목 | 내용 |
|------|------|
| 화면명 | PaymentGuide |
| 목적 | 계좌이체 안내 |
| 구성요소 | 예약 완료 아이콘/일러스트, 안내 문구 "예약이 요청되었어요!", 입금 계좌 정보 (복사 버튼 포함), 입금 금액, 입금자명 안내 (이름으로 입금), 안내 문구 "입금 확인 후 예약이 확정됩니다", 홈으로 버튼, 예약 내역 보기 버튼 |
| 비고 | PG 결제 미사용 (사업자 미등록) |

---

### 4.6 기타 화면

#### 4.6.1 예약 상세 화면
| 항목 | 내용 |
|------|------|
| 화면명 | ReservationDetail |
| 목적 | 예약 상세 정보 확인 |
| 구성요소 | 상태 표시 (진행 바 형태), 상품 정보 카드, 대여 기간, 픽업/반납 정보, 결제 정보, 취소 버튼 (입금대기/예약대기 상태일 때만 표시) |
| 상태 종류 | 입금대기 → 예약대기 → 예약확정 → 픽업완료 → 대여중 → 반납완료 |

#### 4.6.2 프로필 수정 화면
| 항목 | 내용 |
|------|------|
| 화면명 | EditProfile |
| 목적 | 개인 정보 수정 |
| 구성요소 | 이름 입력, 전화번호 표시 (변경 불가, 읽기 전용), 사이즈 선택, 저장 버튼 |
| 비고 | 전화번호 변경은 재인증 필요 (Phase 2) |

#### 4.6.3 검색 화면
| 항목 | 내용 |
|------|------|
| 화면명 | Search |
| 로그인 필요 | ❌ 불필요 |
| 목적 | 상품 검색 |
| 구성요소 | 검색 입력창 (자동 포커스), 최근 검색어, 인기 검색어, 검색 결과 그리드 |

---

## 5. 화면 흐름도 (User Flow)

### 5.1 비로그인 사용자 - 탐색
```
스플래시 → 홈 → 카테고리/상품목록 → 상품상세 (자유롭게 탐색)
```

### 5.2 비로그인 사용자 - 예약 시도 (신규)
```
상품상세 → 예약하기 버튼 탭 → 🔐 로그인 팝업 → 전화번호 입력 → 인증번호 입력 → 프로필 설정 → 날짜선택 → 픽업장소 → 예약확인 → 결제안내
```

### 5.3 비로그인 사용자 - 예약 시도 (기존)
```
상품상세 → 예약하기 버튼 탭 → 🔐 로그인 팝업 → 전화번호 입력 → 인증번호 입력 → 날짜선택 → 픽업장소 → 예약확인 → 결제안내
```

### 5.4 로그인 사용자 - 예약
```
상품상세 → 예약하기 버튼 탭 → 날짜선택 → 픽업장소 → 예약확인 → 결제안내
```

### 5.5 예약 확인
```
홈 → 내 예약 탭 → 예약 상세
```

---

## 6. 디자인 가이드라인

### 6.1 컬러 팔레트
| 용도 | 색상 | HEX | 사용처 |
|------|------|-----|--------|
| Primary | 블랙 | #000000 | 앱바, 주요 텍스트, 버튼 |
| Background | 화이트 | #FFFFFF | 배경 |
| Accent | 버건디 | #800020 | CTA 버튼, 강조, 뱃지 |
| Surface | 라이트 그레이 | #F5F5F5 | 카드 배경, 구분선 |
| Text Primary | 블랙 | #000000 | 제목, 본문 |
| Text Secondary | 다크 그레이 | #666666 | 부가 설명 |
| Text Tertiary | 미디엄 그레이 | #999999 | 힌트, 비활성 |
| Disabled | 라이트 그레이 | #CCCCCC | 비활성 버튼/텍스트 |
| Error | 레드 | #D32F2F | 에러 메시지 |
| Success | 그린 | #388E3C | 성공, 예약가능 |

### 6.2 타이포그래피
| 용도 | 크기 | 굵기 | 색상 |
|------|------|------|------|
| H1 (페이지 제목) | 24sp | Bold | Black |
| H2 (섹션 제목) | 20sp | SemiBold | Black |
| H3 (카드 제목) | 16sp | Medium | Black |
| Body1 | 14sp | Regular | Black |
| Body2 | 14sp | Regular | #666666 |
| Caption | 12sp | Regular | #999999 |
| Button | 14sp | SemiBold | White/Black |
| Price | 18sp | Bold | 버건디 |

### 6.3 컴포넌트 스타일
| 컴포넌트 | 스타일 |
|----------|--------|
| Primary 버튼 | 버건디 배경, 화이트 텍스트, radius 8dp |
| Secondary 버튼 | 블랙 배경, 화이트 텍스트, radius 8dp |
| Outlined 버튼 | 화이트 배경, 블랙 테두리, 블랙 텍스트 |
| 카드 | 화이트 배경, radius 12dp, 그림자 subtle |
| 입력 필드 | Outlined, radius 8dp, 포커스 시 블랙 테두리 |
| OTP 입력 | 6개 개별 박스, 자동 다음 칸 이동 |
| 칩 (선택) | 미선택: 그레이 배경 / 선택: 블랙 배경 + 화이트 텍스트 |
| 하단 탭바 | 화이트 배경, 선택 시 블랙 아이콘 + 버건디 인디케이터 |
| 뱃지 | 버건디 배경, 화이트 텍스트, radius 4dp |

### 6.4 아이콘 스타일
- **스타일:** Outlined (선형)
- **굵기:** 1.5~2px stroke
- **크기:** 24dp (기본), 20dp (작은), 28dp (큰)
- **색상:** 블랙 기본, 버건디 강조

---

## 7. 개발 우선순위

### Phase 1 (MVP)
1. 스플래시
2. 홈 화면
3. 카테고리/상품 목록
4. 상품 상세
5. 로그인 유도 팝업
6. 전화번호 인증 (Firebase Phone Auth)
7. 프로필 설정
8. 예약 플로우 (날짜 → 장소 → 확인 → 결제안내)
9. 내 예약 (예약 내역)
10. 마이페이지

### Phase 2
1. 코디 세트 기능
2. Google Calendar 연동
3. 지도 기반 픽업 장소 (Google Maps)
4. 검색 기능
5. 푸시 알림 (FCM)
6. 전화번호 변경 기능

### Phase 3 (선택)
1. QR 체크인/체크아웃
2. 할인 코드
3. 찜하기 기능
4. 관리자 앱/웹

---

## 8. 기술 스택

| 영역 | 기술 |
|------|------|
| Frontend | Flutter 3.x |
| State Management | Riverpod / Bloc |
| Backend | Firebase |
| 인증 | Firebase Authentication (Phone Auth) |
| 데이터베이스 | Cloud Firestore |
| 스토리지 | Firebase Storage |
| 푸시 알림 | Firebase Cloud Messaging (FCM) |
| 지도 | Google Maps Flutter |
| 캘린더 | table_calendar 패키지 |
| 이미지 | cached_network_image |
| 폰트 | Pretendard (추천) |

---

## 9. Firebase 데이터 구조 (참고)

### 9.1 Firestore Collections

```
├── users/
│   └── {uid}/
│       ├── name: string
│       ├── phone: string
│       ├── size: string (S/M/L/XL/XXL)
│       ├── createdAt: timestamp
│       └── updatedAt: timestamp
│
├── products/
│   └── {productId}/
│       ├── name: string
│       ├── description: string
│       ├── category: string (tops/bottoms/outer/set)
│       ├── images: array<string>
│       ├── prices: { day1: number, day3: number, day5: number }
│       ├── sizes: array<string>
│       ├── status: string (available/rented/reserved)
│       ├── setItems: array<productId> (세트인 경우)
│       └── createdAt: timestamp
│
├── reservations/
│   └── {reservationId}/
│       ├── userId: string
│       ├── productId: string
│       ├── status: string (pending_payment/pending/confirmed/picked_up/renting/returned/cancelled)
│       ├── startDate: timestamp
│       ├── endDate: timestamp
│       ├── duration: number (1/3/5)
│       ├── pickupLocation: { name, address, lat, lng }
│       ├── pickupTime: string
│       ├── returnTime: string
│       ├── totalPrice: number
│       ├── createdAt: timestamp
│       └── updatedAt: timestamp
│
├── locations/
│   └── {locationId}/
│       ├── name: string
│       ├── address: string
│       ├── lat: number
│       ├── lng: number
│       ├── operatingHours: string
│       └── isActive: boolean
```

---

## 10. 와이어프레임 화면 목록

Figma 작업 시 아래 순서로 화면 제작 권장:

| 순번 | 화면명 | 우선순위 |
|------|--------|----------|
| 1 | Splash | MVP |
| 2 | Home | MVP |
| 3 | Category | MVP |
| 4 | ProductList | MVP |
| 5 | ProductDetail | MVP |
| 6 | LoginPopup (BottomSheet) | MVP |
| 7 | PhoneInput | MVP |
| 8 | OTPInput | MVP |
| 9 | ProfileSetup | MVP |
| 10 | DateSelection | MVP |
| 11 | PickupLocation | MVP |
| 12 | ReservationConfirm | MVP |
| 13 | PaymentGuide | MVP |
| 14 | MyReservations | MVP |
| 15 | ReservationDetail | MVP |
| 16 | MyPage | MVP |
| 17 | EditProfile | MVP |
| 18 | Search | Phase 2 |
| 19 | CoordinateSetDetail | Phase 2 |

---

**문서 정보**
- **작성일:** 2025년 11월 30일
- **버전:** 1.2
- **변경사항:** 
  - 전화번호 인증(Firebase Phone Auth)으로 변경
  - 이메일/카카오 로그인 제거
  - 인증 플로우 화면 상세화 (전화번호 입력, OTP 입력)
  - Firebase 데이터 구조 추가
  - 와이어프레임 화면 목록 추가
